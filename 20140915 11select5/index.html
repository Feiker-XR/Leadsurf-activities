<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>凤凰彩票</title>
<link rel="stylesheet" href="style/style.css"/>
<script type="text/javascript">
  var _adwq = _adwq || [];
  _adwq.push(['_setAccount', 'pyjsi']);
  _adwq.push(['_setDomainName', '.fhhd.net']);
  _adwq.push(['_trackPageview']);
</script>

</head>
<body class="">
	
	<div class="banner"></div>
	
	<div class="content">
		<div class="content-inner clearfix">
			<div class="form">
				<form action="" class="J-user-info" data-tag="dialog">
					<ul class="form-list">
						<li>
							<input type="text" value="用户名" class="input name" id="J-input-username" />
							<span class="ui-check">6-16位数字、字母，首字符为字母</span>
						</li>
						<li>
							<input type="password" value="" class="input password hide" id="J-input-password" />
							<input type="text" value="密码" class="input password" id="J-password"/>
							<span class="ui-check">6-16位数字、字母（区分大小写）</span>
						</li>
						<li>
							<input type="password" value="" class="input repassword hide" id="J-input-repassword" />
							<input type="text" value="确认密码" class="input password"  id="J-repassword" />
							<span class="ui-check">请再次输入密码</span>
						</li>
						<li>
							<input type="password" value="" class="input  hide" id="J-input-" />
							<input type="text" value="QQ号码" class="input password" id="J-input-qq" />
							<span class="ui-check">QQ号作为领取彩金的凭据</span>
						</li>
						<li>
							<img id="img-code" class="img-captcha" onClick="this.src='./yzm.php?useValid=' + Math.random()" src="./yzm.php?useValid=0.2145167330466049" title="看不清，请点击更换图片" alt="验证码">
							<input type="text" value="验证码" class="input input-captcha captcha" id="J-input-captcha" />
							<span class="ui-check"></span>
						</li>
						<li>
							<input id="J-button-submit" type="button" value="" class="sub-btn" />
						</li>
					</ul>
					<div class="qq-service">
						<a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1833216600&amp;site=qq&amp;menu=yes" title="点击这里给我发消息" alt="点击这里给我发消息" target="_blank">凤凰客服 乐乐</a>
						<a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1833216611&amp;site=qq&amp;menu=yes" title="点击这里给我发消息" alt="点击这里给我发消息" target="_blank">凤凰客服 宝宝</a>
						<a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1833216622amp;site=qq&amp;menu=yes" title="点击这里给我发消息" alt="点击这里给我发消息" target="_blank">凤凰客服 贝贝</a>
					</div>
				</form>
			</div>
			
		</div>
	</div>
	<div class="footer">
		<div class="partner"></div>
		<div class="copyright">&copy;2003 - 2014 All right reserved.凤凰游戏平台版权所有 <a href="http://www.ph158.info:8080/download/591ph_v1.2.1.zip" target="_blank">下载平台客户端</a></div>
	</div>
	<div style="z-index:666;display:none;" id="J-success-reg" class="pop pop-mini">
		<i class="ico-close">×</i>
		<div class="hd"></div>
		<div class="bd">
			<div class="main">
				<h3>恭喜您，账号注册成功！</h3>
				<p>尊敬的 <span id="username" style="color:#DF5064">r342525444r</span> 您的凤凰账户已经开通。</p>
				<a class="btn-check" href="http://www.ph278.com" target="_blank">进入平台</a>
			</div>
		</div>
	</div>
<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/phoenix.base.js" ></script>
<script type="text/javascript" src="js/phoenix.Class.js" ></script>
<script type="text/javascript" src="js/phoenix.Event.js" ></script>
<script type="text/javascript" src="js/phoenix.Mask.js" ></script>
<script type="text/javascript" src="js/phoenix.Tip.js" ></script>
<script type="text/javascript" src="js/phoenix.util.js" ></script>
<script type="text/javascript" src="js/phoenix.Input.js" ></script>

<script type="text/javascript">	
	var mask = phoenix.Mask.getInstance(),
		tip = phoenix.Tip.getInstance(),
		currentWd = null; 
	
	//公共关闭窗口按钮
	$('.pop .ico-close, .pop .btn-close, .btn-click, .control-refresh').click(function(){
		var el = $(this);
		
		if(el.hasClass('control-close')){
			var wd = $('#J-wd-submit-not');
			showWd(wd);
		}else if(el.hasClass('control-close-cancel')){
			$('#J-wd-submit-not').hide();
		}else if(el.hasClass('control-close-confirm')){
			$('#J-wd-submit-not').hide();
			$('#J-wd-item').hide();
			hideWd();
		}else if(el.hasClass('control-refresh')){
			location.href = location.href;
		}else{
			hideWd();
		}
	});

	function showWd(dom){
		phoenix.util.toViewCenter(dom);
		mask.show();
		dom.show();
		currentWd = dom;
	}
	function hideWd(){
		var img = $('#J-user-reg').find('.verify-code'),
			captchaResultDom = img.next();

		if(currentWd && currentWd.hide){
			currentWd.hide();
			mask.hide();
		}

		if(typeof window.CapTchaStatus != 'undefined'){
			loadCaptcha(img, captchaResultDom);
			window.CapTchaStatus = null;
		}
	}
	
	//用户名校验
	function checkUserName(text){
		var nameText = $.trim(text),
			checkTest = /^[a-z|A_Z]/;

		if(nameText.length >= 6 && nameText.length <= 16 && checkTest.test(nameText)){
			return true;
		}else{
			return false;
		}
	}
	//密码校验
	function checkPassword(passNum){
		var password = $.trim(passNum);

		if(password.length >= 6 && password.length <= 16) {
			return true;
		}else{
			return false;
		}
	}
	//确认密码校验
	function ReCheckPassword(password, rePassword) {
		var password = $.trim(password),
			rePassword = $.trim(rePassword);

		if(password == rePassword){
			return true;
		}else{
			return false;
		}
	}
	//验证码校验
	function checkCaptcha(captchaNum, callback) {
		var captcha = $.trim(captchaNum);

		$.ajax({
			url: '/path/to/file',
			type: 'GET',
			dataType: 'json',
			data: {'captcha': captcha},
			success: function (result){
				if(result['isSuccess'] == 1) {
					if(callback) {
						callback();
					}
				}else{
					alert('验证码读取失败，请刷新页面重试。');
				}
			}
		});
	}
	
	function getTag(dom){
		var parentFormDom = $(dom).parents('form').eq(0);

		return parentFormDom.attr('data-tag');
	}

	function getFormDom(name){

		return $('body').find('form[data-tag='+ name+']');
	}
	//注册提交
	(function(){
		var regFormDom = $('.J-user-info');

		dataSave = {};
		dataSave['dialog'] = {};
		dataSave['toolbar'] = {};

		//用户名校验
		regFormDom.find('.name').blur(function(){
			var name = $(this).val(),
				tag = getTag(this),
				resultDom = $(this).next();

			if(!checkUserName(name)){
				resultDom.html('6-16位字符，首字符必须是字母').addClass('ui-check-error');
				dataSave[tag]['username'] = false;
			}else{
				resultDom.html('');
				dataSave[tag]['username'] = name;
			}
		}).click(function(event) {
			var resultDom = $(this).next();

			resultDom.html('');
		});

		//密码校验
		$('#J-input-password').blur(function(){
			var password = $.trim($(this).val()),
				tag = getTag(this),
				resultDom = $(this).next().next();

			if(password == ''){
				$(this).hide().next().show();
				resultDom.html('6-16位字符，区分大小写').addClass('ui-check-error');
				return;
			}

			if(!checkPassword(password)){
				resultDom.html('6-16位字符，区分大小写').addClass('ui-check-error');
				dataSave[tag]['password'] = false;
			}else{
				resultDom.html('');
				dataSave[tag]['password'] = password;
			}

		}).click(function(event) {
			var resultDom = $(this).next('span');

			resultDom.html('');
		});

		//确认密码校验
		$('#J-input-repassword').blur(function(){
			var rePassword = $.trim($(this).val()),
				tag = getTag(this),
				passwordDom = $('#J-input-password'),
				password = passwordDom.val(),
				resultDom = $(this).next().next();

			if(rePassword == ''){
				$(this).hide().next().show();
				passwordDom.show().focus().next().hide().next().html('6-16位字符，区分大小写').addClass('ui-check-error');;
				return;
			}

			if(password == '') {
				passwordDom.next('span').html('6-16位字符，区分大小写').addClass('ui-check-error');
				passwordDom.focus();
				return;
			}

			if(!ReCheckPassword(password, rePassword)){
				resultDom.html('密码不一致，请重新输入').addClass('ui-check-error');
				dataSave[tag]['rePassword'] = false;
			}else{
				resultDom.html('');
				dataSave[tag]['rePassword'] = rePassword;
			}
		}).click(function(event) {
			var resultDom = $(this).next('span');

			resultDom.html('');
		});

		$('#J-password, #J-repassword').focus(function(event) {
			$dom = $(this).prev();
			$(this).hide();
			$dom.show().focus();
		});


		//验证码校验
		regFormDom.find('.captcha').blur(function(event){
			var captchaNum = $.trim($(this).val()),
				tag = getTag(this),
				resultDom = $(this).next('');

			if(captchaNum == ''){
				resultDom.html('验证码错误，请重新输入。').addClass('ui-check-error');
				dataSave[tag]['captcha'] = false;
			}else{
				resultDom.html('');
				dataSave[tag]['captcha'] = captchaNum;
			}
		});

		//注册
		regFormDom.find('.sub-btn').click(function(){
			
			var tag = getTag(this),
				formDom = getFormDom(tag);

			if(typeof dataSave[tag] == 'undefined'){
				formDom.find('.name').focus().next().html('6-16位字符，首字符必须是字母');
				return;
			}

			if(typeof dataSave[tag]['username'] == 'undefined' || !dataSave[tag]['username']){
				formDom.find('.name').focus().next().html('6-16位字符，首字符必须是字母');
				return;
			}
			if(typeof dataSave[tag]['password'] == 'undefined' || !dataSave[tag]['password']){
				formDom.find('.password').focus().next().html('6-16位字符，区分大小写');
				return;
			}
			if(typeof dataSave[tag]['rePassword'] == 'undefined' || !dataSave[tag]['rePassword']){
				formDom.find('.repassword').focus().next().html('密码不一致，请重新输入');
				return;
			}
			if(typeof dataSave[tag]['captcha'] == 'undefined' || !dataSave[tag]['captcha']){
				formDom.find('.captcha').focus().next().next().html('验证码错误，请重新输入。');
				return;
			}   
			
			$.ajax({
				url: './register.json',
				type: 'POST',
				dataType: 'JSON',
				data: {
					'name': dataSave[tag]['username'], 
					'password': dataSave[tag]['password'],
					'rePassword': dataSave[tag]['rePassword'],
					'captcha': dataSave[tag]['captcha']
				},
				success: function(result) {
					//提交成功
					if(result['isSuccess'] == 1){
						//用户名相关
						if(result['typeId'] == 1){
							hideWd();
							$('#username').text(result['data']['username']);
							showWd($('#J-success-reg'));
						}
						//用户名相关
						if(result['typeId'] == 2){
							formDom.find('.name').html('').focus().next().html(result['msg']);
						}
						//验证码错误
						if(result['typeId'] == 3){
							formDom.find('.captcha').html('').focus().next().next().html('验证码错误，请重新输入。');
						}
						//同IP注册人数超过限制
						if(result['typeId'] == 4){
							hideWd();
							showWd($('#J-overrun-reg'));
						}
						//密码错误[包括不能连续3位以及三重号]
						if(result['typeId'] == 5){
							formDom.find('.password').html('').focus().next().html(result['msg']);
						}

						formDom[0].reset();
					}else{
						hideWd();
						showWd($('#J-error-reg'));
					}
				},
				error: function(){
					hideWd();
					showWd($('#J-error-reg'));
				}
			})
		});
		new phoenix.Input({defText:"用户名", el:'#J-input-username'});
		// new phoenix.Input({defText:"密码", el:'#J-password'});
		// new phoenix.Input({defText:"确认密码", el:'#J-repassword'});
		new 
		new phoenix.Input({defText:"验证码", el:'#J-input-captcha'});
	})();
	
	
	$('#J-button-submit').mousedown(function(){
		_adwq.push(['_setAction', '2bukry', '1', '']);
	});
	
	
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46862594-1', 'fhhd.net');
  ga('send', 'pageview');

</script>

</body>
</html>